# Walrus Sites Configuration for Web3 Linktree
# This file configures how your Linktree dApp is deployed to Walrus Sites
# Learn more: https://docs.wal.app/walrus-sites/tutorial-suins.html

# Basic site configuration
site_name: "Web3 Linktree"
site_description: "On-chain NFT-based LinkTree platform on Sui blockchain"

# Build configuration
build:
  # Directory containing the built application
  output_dir: "dist"
  
  # Entry point HTML file
  index_file: "index.html"
  
  # Compression settings for better performance
  compression: true
  
  # Maximum blob size (in bytes) before splitting
  max_blob_size: 10485760 # 10 MB

# Network configuration
network: "testnet" # Change to "mainnet" for production

# SuiNS integration for custom domain routing
# This implements the Flatland pattern for per-NFT routing
suins:
  enabled: true
  # Optional: Default subdomain if no SuiNS name is specified
  default_subdomain: "linktree"

# CORS settings for API access
cors:
  enabled: true
  allowed_origins:
    - "*"
  allowed_methods:
    - "GET"
    - "POST"
  allowed_headers:
    - "Content-Type"
    - "Authorization"

# Caching configuration
cache:
  # Cache duration in seconds
  max_age: 3600 # 1 hour
  
  # Cache static assets longer
  static_assets_max_age: 86400 # 24 hours

# Routes configuration for dynamic content
routes:
  # Main app route
  - path: "/"
    type: "spa"
    
  # API routes (if needed)
  - path: "/api/*"
    type: "proxy"
    
  # SuiNS dynamic routing - Flatland pattern
  # Each .sui name resolves to its own Linktree page
  - path: "/:suins_name"
    type: "dynamic"
    handler: "resolve_suins"

# Resource optimization
optimization:
  # Minify HTML/CSS/JS
  minify: true
  
  # Tree-shaking to remove unused code
  tree_shake: true
  
  # Image optimization
  optimize_images: true

# Error pages
error_pages:
  404: "404.html"
  500: "500.html"

# Environment variables (optional)
# These will be injected at build time
env:
  # Sui network RPC endpoint
  VITE_SUI_NETWORK: "testnet"
  
  # Default to Walrus Sites domain
  VITE_BASE_URL: "https://linktree.walrus.site"

# Security headers
security:
  # Content Security Policy
  csp: "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline';"
  
  # Prevent clickjacking
  x_frame_options: "SAMEORIGIN"
  
  # XSS protection
  x_xss_protection: "1; mode=block"
  
  # Content type sniffing protection
  x_content_type_options: "nosniff"

# Analytics (optional)
analytics:
  enabled: false
  # Add your analytics configuration here

# Feature flags
features:
  # Enable zkLogin authentication
  zklogin: true
  
  # Enable sponsored transactions via Enoki
  sponsored_transactions: true
  
  # Enable SuiNS domain binding
  suins_binding: true
  
  # Enable PWA (Progressive Web App) features
  pwa: false
